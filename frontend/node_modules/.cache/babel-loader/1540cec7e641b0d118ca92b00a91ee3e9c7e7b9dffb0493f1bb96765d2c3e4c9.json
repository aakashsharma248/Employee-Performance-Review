{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import\"./EmployeeDashboard.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeeDashboard=()=>{// State variables\nconst[performanceReviews,setPerformanceReviews]=useState([]);const[feedbacks,setFeedbacks]=useState({});const navigate=useNavigate();// Fetch performance reviews on component mount\nuseEffect(()=>{fetchPerformanceReviews();},[]);// Function to fetch performance reviews requiring feedback\nconst fetchPerformanceReviews=()=>{axios.get('/api/performance-reviews').then(response=>{const reviewsNeedingFeedback=response.data.filter(review=>!review.feedbackSubmitted);setPerformanceReviews(reviewsNeedingFeedback);}).catch(error=>{console.error('Error fetching performance reviews:',error);});};// Function to handle form submission for submitting feedback\nconst handleSubmitFeedback=performanceReviewId=>{const feedbackText=feedbacks[performanceReviewId];axios.post(\"/api/performance-reviews/\".concat(performanceReviewId,\"/feedback\"),{feedbackText,reviewerId:performanceReviewId}).then(response=>{fetchPerformanceReviews();// Refresh performance review list after submitting feedback\nsetFeedbacks(prevFeedbacks=>({...prevFeedbacks,[performanceReviewId]:''// Reset feedback for this review\n}));}).catch(error=>{console.error('Error submitting feedback:',error);});};// Function to handle feedback change for a specific review\nconst handleFeedbackChange=(performanceReviewId,value)=>{setFeedbacks(prevFeedbacks=>({...prevFeedbacks,[performanceReviewId]:value}));};const LoginAsAdmin=()=>{console.log('LoginAsAdmin');navigate(\"/admin\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:LoginAsAdmin,className:\"AdminLogin\",children:\"Login as Admin\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Employee Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Performance Reviews Requiring Feedback\"}),/*#__PURE__*/_jsx(\"ul\",{children:performanceReviews.map(review=>/*#__PURE__*/_jsxs(\"li\",{className:\"review-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"}),\" \",review.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",review.description]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Enter your feedback\",value:feedbacks[review._id]||'',onChange:e=>handleFeedbackChange(review._id,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSubmitFeedback(review._id),children:\"Submit Feedback\"})]},review._id))})]})]});};export default EmployeeDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","EmployeeDashboard","performanceReviews","setPerformanceReviews","feedbacks","setFeedbacks","navigate","fetchPerformanceReviews","get","then","response","reviewsNeedingFeedback","data","filter","review","feedbackSubmitted","catch","error","console","handleSubmitFeedback","performanceReviewId","feedbackText","post","concat","reviewerId","prevFeedbacks","handleFeedbackChange","value","LoginAsAdmin","log","className","children","onClick","map","title","description","placeholder","_id","onChange","e","target"],"sources":["/home/aakash/Downloads/Employee-Performance-Review-master/frontend/src/components/EmployeeDashboard/EmployeeDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport \"./EmployeeDashboard.css\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst EmployeeDashboard = () => {\n  // State variables\n  const [performanceReviews, setPerformanceReviews] = useState([]);\n  const [feedbacks, setFeedbacks] = useState({});\n  const navigate = useNavigate();\n\n  // Fetch performance reviews on component mount\n  useEffect(() => {\n    fetchPerformanceReviews();\n  }, []);\n\n  // Function to fetch performance reviews requiring feedback\n  const fetchPerformanceReviews = () => {\n    axios.get('/api/performance-reviews')\n      .then(response => {\n        const reviewsNeedingFeedback = response.data.filter(review => !review.feedbackSubmitted);\n        setPerformanceReviews(reviewsNeedingFeedback);\n      })\n      .catch(error => {\n        console.error('Error fetching performance reviews:', error);\n      });\n  };\n\n  // Function to handle form submission for submitting feedback\n  const handleSubmitFeedback = (performanceReviewId) => {\n    const feedbackText = feedbacks[performanceReviewId];\n    axios.post(`/api/performance-reviews/${performanceReviewId}/feedback`, { feedbackText, reviewerId: performanceReviewId })\n      .then(response => {\n        fetchPerformanceReviews(); // Refresh performance review list after submitting feedback\n        setFeedbacks(prevFeedbacks => ({\n          ...prevFeedbacks,\n          [performanceReviewId]: '' // Reset feedback for this review\n        }));\n      })\n      .catch(error => {\n        console.error('Error submitting feedback:', error);\n      });\n  };\n\n  // Function to handle feedback change for a specific review\n  const handleFeedbackChange = (performanceReviewId, value) => {\n    setFeedbacks(prevFeedbacks => ({\n      ...prevFeedbacks,\n      [performanceReviewId]: value\n    }));\n  };\n\n  const LoginAsAdmin = () => {\n   console.log('LoginAsAdmin');\n   navigate(\"/admin\");\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n    <button onClick={LoginAsAdmin} className=\"AdminLogin\">Login as Admin</button>\n    <h2>Employee Dashboard</h2>\n    {/* Performance Reviews Requiring Feedback */}\n    <div className=\"review-container\">\n      <h3>Performance Reviews Requiring Feedback</h3>\n      <ul>\n        {performanceReviews.map(review => (\n          <li key={review._id} className=\"review-item\">\n            <p><strong>Title:</strong> {review.title}</p>\n            <p><strong>Description:</strong> {review.description}</p>\n            <textarea\n              placeholder=\"Enter your feedback\"\n              value={feedbacks[review._id] || ''}\n              onChange={(e) => handleFeedbackChange(review._id, e.target.value)}\n            />\n            <button onClick={() => handleSubmitFeedback(review._id)}>Submit Feedback</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  </div>\n  \n  );\n};\n\nexport default EmployeeDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}